### abstraction

4PCS 提出从一个近似共等的三维点集，在刚性变换下，提取到一个给定的共面4点集。并提出了一个扩展来处理相似性和仿射变换。比普通的随机对齐技术有一个数量级的渐近加速度。

### base

A. LCP 即通过一个刚体变换，使得重叠区域内所有点对之间的距离小于δ，这个重叠区域就是要求的最大公共点集。简单来说就是，给定两个处于任意初始位置的点集P和Q，找到两个点集之间的最佳刚性变换，使得P，Q中两点间距离小于δ的点数最多。

B. wide-base 宽基集 和LCP让该配准算法能适应噪声和离群点，因此算法能对原始数据进行直接配准。即使在低重叠度和没有初始配准的情况下，算法也能成功配准点云。

C. RANSAC 大量用于拟合被噪声和离群值污染的模型，基本思想就是在模型中随机选取点。

D. Randomized Alignment 随机对齐是RANSAC的一种变体算法。迭代次数L=3。4pcs算法基于随机对齐算法，并引入平面全等集。

**main idea**

A. 仿射变换 共面点集 X ≡ { a , b , c , d } ，并不全部共线， e是ab和cd的交点，定义两个独立的比值 r1， r2：
	r1 = ∥ a − e ∥ / ∥ a − b ∥
	r2 = ∥ c − e ∥ / ∥ c − d ∥
r1，r2在仿射变换下具有不变性，并且唯一地定义了仿射变换的4个点。现在给定一个n个点的集合Q，以及两个仿射不变比r1,r2，我们可以在 O(n^2+k) )时间内有效地提取由这两个不变量定义的所有4点集，其中k是所提取的4点集的个数。对于每个点对q1,q2∈Q，计算两个中间点：
	e1 = q1 + r1 ( q2 − q1 )
	e2 = q1 + r2 ( q2 − q1 )
任何两对中间点（一个来自r1，另一个来自r2）重合，可能对应于一个仿射变换4点集。

B. 提取近似共面4点集。刚性变换保持点间欧几里德距离。给定基 B ≡ { a , b , c , d } ，我们首先计算距离 d 1 = ∥ a − b ∥和 d 2 = ∥ c − d ∥。现在我们只考虑Q中相距d1或d2的点对，误差为δ。对于具有大致均匀采样的点集，我们只需要在距离数据结构中插入O(n)对。因此，整个算法在O(n^2)时间内运行。

C. 4PCS算法。
a. 选择一个共面4点组成的基集： B ⊆ P。（先随机选3个点，再选第四个点，与前三个点近似在同一平面）其中宽基集要求点各自相隔较远让结果更稳定，但是太远可能导致点不在重叠区域内，因此得不到满意的结果。我们使用重叠度 f 来估计这个距离。如果 f 没有给定，那么在算法上使用从1递减的 f 如 f = 1 , 0.5 , 0.25 , . . . 直到得到满意的结果。在重叠度 f 已知情况下，我们可以选择一个在重叠部分的3点集，再按上面的方法选择第4个点。
b. 在基集B的获取阶段，定义仿射不变比。对于近似平面的基集，我们使用连接点对的线之间最近的点来定义不变比率。从Q中提取所有4点子集的集合U≡{U1，U2，…，Us}，这些子集与B近似全等。对于每个 Ui，利用B和Ui之间的对应信息，计算出最佳刚体变换Ti，使B在最小二乘意义上接近Ui。
c. 给定一个基Bi，我们描述了如何计算与其对应的最佳变换Ti。每个变换Ti基于阈值δ有一个分数。执行randomized alignment，并根据重叠度 f 的估计值，测试L个不同的基Bi。最后得到得分最高的转换Topt。

D. 优化。局部描述子。

### result

在存在大量异常值、低重叠或高噪声的情况下，我们的算法总是优于LD-RANSAC（local descriptor RANSAC）。在局部描述符可靠计算的情况下，4PCS的工作速度甚至更快。

局限性。slippable；极低重叠度；大量点集。

